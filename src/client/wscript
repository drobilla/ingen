#!/usr/bin/env python
import Params
import autowaf

def build(bld):
	obj = bld.create_obj('cpp', 'shlib')
	obj.source = '''
		ClientStore.cpp
		NodeModel.cpp
		ObjectModel.cpp
		PatchModel.cpp
		PluginModel.cpp
		PluginUI.cpp
		PortModel.cpp
		ThreadedSigClientInterface.cpp
		client.cpp
	'''

	if bld.env()['HAVE_SOUP'] == 1:
		obj.source += '''
			HTTPClientReceiver.cpp
			HTTPEngineSender.cpp
		'''
	
	if bld.env()['HAVE_XML2'] == 1:
		obj.source += ' DeprecatedLoader.cpp '

	if bld.env()['HAVE_LIBLO'] == 1:
		obj.source += ' OSCClientReceiver.cpp OSCEngineSender.cpp '

	obj.includes = ['.', '..', '../common']
	obj.name     = 'libingen_client'
	obj.target   = 'ingen_client'
	obj.inst_dir = 'lib/ingen'
	autowaf.use_lib(bld, obj, 'GLIBMM LV2CORE SLV2 RAUL REDLANDMM SOUP XML2 SIGCPP LIBLO SOUP')

